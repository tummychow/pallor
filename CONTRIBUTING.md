# CONTRIBUTING

## Adding scopes

To improve pallor's support for other languages, we would need to add more scopes reflecting the TextMate grammars that those languages use. I don't speak too many languages myself, but I have no problem with adding others.

Add your new scopes to [pallor.tmTheme.tmpl.json](pallor.tmTheme.tmpl.json). Please add them here even if you're comfortable editing PLIST by hand. Try to add the scopes under an existing object in the `settings` array, if they make sense there. For example, the quotes around strings are added under the comments object, even though that's not what they really are. From the standpoint of the viewer, they're treated the same way - content that should generally be in the background. Another example is the JSON keys. YAML keys fall under the `entity.name.tag` scope, so we want JSON keys to be highlighted in the same color, and therefore they end up under the same object. If your new scope should generally be highlighted the same way as an existing scope, add it to the same object as that existing scope.

If it doesn't make sense to add your new scope to an existing object, you can add a new one. For example, HTML tags and keywords are highlighted the same way in pallor, but they clearly have different meanings, and it wouldn't be surprising if someone wanted to change the color of one and not the other. In that case, it makes sense for tags and keywords to have separate objects. Each object in the settings array gets its own entry in [colors.json](colors.json), so if you added a new object, you should add a new entry there as well. You can see that language-specific items get their own sub-object (eg the prose items) where as the general-purpose scopes are at the top level. Choose one of the existing colors to use as a default for your new entry. **DO NOT ADD A NEW COLOR**.

Once you've made the changes to the JSON template, use your PLIST-JSON converter to generate a new [pallor.tmTheme.tmpl.plist](pallor.tmTheme.tmpl.plist). If you diff the old plist and your new plist, the diffs should be reasonable. There are many different ways to write the same PLIST, so if your converter is different from mine, there could be a lot of noise from changes to indentation levels, or whitespace, or other stuff like that. Please try to clean that up. Alternatively, I can do the conversion for you to ensure that the diff is clean.

Once you've got the new JSON template and the new PLIST template (and the new colors.json, if you added something to it), squash all the changes into a single commit representing the new scopes you added. If you're adding a whole bunch of scopes, you can combine them all into one commit, assuming they're all logically related. For example, if all your scope additions are improving support for a certain language, feel free to combine them all together. You don't need one commit for each individual scope that you've introduced.

In your PR, be sure to note what TextMate grammar your changes are designed for. Scopes depend on the grammar that defines them. For example, if you're using the default TextMate Markdown grammar, you won't see any of pallor's fancy markdown highlighting, because it depends on Markdown Extended. In a similar regard, if your changes depend on a non-default grammar, please point that out. I'll add an entry to the README myself to note that grammar.

Finally, if you aren't really sure how to proceed, just edit the JSON template with your new scopes, and open your PR with that commit alone. We can discuss the other changes that need to be made as we go.
